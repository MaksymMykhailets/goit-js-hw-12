{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = '43248873-3ce9b820c5f26b6ef0afaa018';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(searchQuery, page = 1, perPage = 15) {\n    const params = {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page: page,\n        per_page: perPage\n    };\n\n    try {\n        const response = await axios.get(BASE_URL, { params: params });\n        const data = response.data;\n        \n        if (data.hits.length === 0) {\n            throw new Error('Sorry, there are no images matching your search query. Please try again!');\n        }\n        \n        return {\n            images: data.hits,\n            totalHits: data.totalHits\n        };\n    } catch (error) {\n        throw new Error('Network response was not ok');\n    }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nexport { gallery, renderImages };\n\nfunction renderImages(images) {\n\n    images.forEach(image => {\n        const imageEl = `\n            <div class=\"gallery-item\">\n                <a href=\"${image.largeImageURL}\">\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n                </a>\n                <div class=\"image-info\">\n                    <p>Likes: ${image.likes}</p>\n                    <p>Views: ${image.views}</p>\n                    <p>Comments: ${image.comments}</p>\n                    <p>Downloads: ${image.downloads}</p>\n                </div>\n            </div>\n        `;\n        gallery.insertAdjacentHTML('beforeend', imageEl);\n    });\n\n    const lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n    lightbox.refresh();\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchImages } from \"./js/pixabay-api\";\nimport { gallery, renderImages } from \"./js/render-functions\";\n\nconst searchForm = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nsearchForm.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\nlet currentPage = 1;\nlet currentSearchQuery = '';\nconst perPage = 15;\nlet totalHits = 0;\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n\n    const searchInput = document.querySelector('.search-input');\n    const searchQuery = searchInput.value.trim();\n\n    if (!searchQuery) {\n        showErrorToast('Search query cannot be empty');\n        return;\n    }\n\n    loader.style.display = 'block';\n    gallery.innerHTML = '';\n    currentPage = 1;\n    currentSearchQuery = searchQuery;\n\n    try {\n        const { images, totalHits } = await fetchImages(currentSearchQuery, currentPage, perPage);\n        handleFetchSuccess(images, totalHits);\n        toggleLoadMoreButton(true);\n    } catch (error) {\n        handleFetchError(error);\n        toggleLoadMoreButton(false);\n    }\n    \n    searchInput.value = '';\n}\n\nfunction showErrorToast(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n    });\n}\n\nfunction showSuccessToast(message) {\n    iziToast.success({\n        title: 'Success',\n        message: message,\n    });\n}\n\nfunction handleFetchSuccess(images, totalHitsValue) {\n    loader.style.display = 'none';\n    renderImages(images);\n    totalHits = totalHitsValue; \n    showSuccessToast('Images loaded successfully');\n    \n    if (images.length < perPage) {\n        toggleLoadMoreButton(false);\n        showErrorToast(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n        toggleLoadMoreButton(true);\n    }\n}\n\nfunction handleFetchError(error) {\n    loader.style.display = 'none';\n    showErrorToast(error.message);\n}\n\nfunction toggleLoadMoreButton(show) {\n    if (show && currentPage * perPage < totalHits) {\n        loadMoreBtn.style.display = 'block';\n    } else {\n        loadMoreBtn.style.display = 'none';\n    }\n}\n\nasync function loadMoreImages() {\n    currentPage += 1;\n\n    try {\n        const { images, totalHits } = await fetchImages(currentSearchQuery, currentPage, perPage);\n        appendImages(images);\n        if (currentPage * perPage >= totalHits) {\n            toggleLoadMoreButton(false);\n            showErrorToast(\"We're sorry, but you've reached the end of search results.\");\n        }\n    } catch (error) {\n        showErrorToast(error.message);\n    }\n}\n\nfunction appendImages(images) {\n    renderImages(images);\n    scrollToNextPage();\n}\n\nfunction scrollToNextPage() {\n    const galleryItemHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n    window.scrollBy({\n        top: galleryItemHeight * 2,\n        behavior: 'smooth'\n    });\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","searchQuery","page","perPage","params","data","axios","gallery","renderImages","images","image","imageEl","SimpleLightbox","searchForm","loader","loadMoreBtn","handleSubmit","loadMoreImages","currentPage","currentSearchQuery","totalHits","event","searchInput","showErrorToast","handleFetchSuccess","toggleLoadMoreButton","error","handleFetchError","message","iziToast","showSuccessToast","totalHitsValue","show","appendImages","scrollToNextPage","galleryItemHeight"],"mappings":"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"}